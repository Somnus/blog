<p>using System;<br />using System.Collections.Generic;<br />using System.Linq;<br />using System.Text;<br />using System.Threading;<br />using System.Net.Sockets;<br />using System.Net;</p>
<p>namespace IClient</p>
<p>{<br />	class Program<br />	{<br />		static void Main(string[] args)<br />		{<br />			int port = Convert.ToInt32(Console.ReadLine());<br />			string host = "10.248.87.202";<br />			IPAddress ip = IPAddress.Parse(host);<br />			IPEndPoint ipe = new IPEndPoint(ip, port);//把ip和端口转化为IPEndPoint实例<br />			Socket c = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);//创建一个Socket<br />			Console.WriteLine("Conneting...");<br />			c.Connect(ipe);<br />			Thread t1 = new Thread(new ParameterizedThreadStart(Send));<br />			Thread t2 = new Thread(new ParameterizedThreadStart(Recive));<br />			t1.Start(c);<br />			t2.Start(c);<br />			Console.ReadLine();<br />		}<br />		public static void Send(object temp)<br />		{<br />			while (true)<br />			{<br />				string sendStr = Console.ReadLine().ToString();<br />				byte[] bs = Encoding.Unicode.GetBytes(sendStr);<br />				((Socket)temp).Send(bs, bs.Length, 0);<br />			}<br />		}</p>
<p>		public static void Recive(object temp)<br />		{<br />			while (true)<br />			{<br />				string recvStr = "";<br />				byte[] recvBytes = new byte[1024];<br />				var bytes = ((Socket)temp).Receive(recvBytes, recvBytes.Length, 0);//从客户端接受信息<br />				recvStr += Encoding.Unicode.GetString(recvBytes, 0, bytes);<br />				Console.WriteLine("Client:{0}", recvStr);//把客户端传来的信息显示出来<br />			}<br />		}</p>
<p>		public static void Closed(Socket Socket, Socket temp)<br />		{<br />			temp.Close();<br />			Socket.Close();<br />		}</p>
<p>	}<br />}</p>